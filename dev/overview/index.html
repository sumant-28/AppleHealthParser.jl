<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Implementation · AppleHealthParser.jl</title><meta name="title" content="Implementation · AppleHealthParser.jl"/><meta property="og:title" content="Implementation · AppleHealthParser.jl"/><meta property="twitter:title" content="Implementation · AppleHealthParser.jl"/><meta name="description" content="Documentation for AppleHealthParser.jl."/><meta property="og:description" content="Documentation for AppleHealthParser.jl."/><meta property="twitter:description" content="Documentation for AppleHealthParser.jl."/><meta property="og:url" content="https://sumant-28.github.io/AppleHealthParser.jl/overview/"/><meta property="twitter:url" content="https://sumant-28.github.io/AppleHealthParser.jl/overview/"/><link rel="canonical" href="https://sumant-28.github.io/AppleHealthParser.jl/overview/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">AppleHealthParser.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../reference/">Reference</a></li><li><a class="tocitem" href="../approach/">Method</a></li><li class="is-active"><a class="tocitem" href>Implementation</a><ul class="internal"><li><a class="tocitem" href="#Streaming-Parser"><span>Streaming Parser</span></a></li><li><a class="tocitem" href="#Implementation-Details"><span>Implementation Details</span></a></li><li><a class="tocitem" href="#Recommended-Approach-After-Vector-of-Dictionaries-Is-Exported"><span>Recommended Approach After Vector of Dictionaries Is Exported</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Implementation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Implementation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/sumant-28/AppleHealthParser.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/sumant-28/AppleHealthParser.jl/blob/main/docs/src/overview.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Implementation"><a class="docs-heading-anchor" href="#Implementation">Implementation</a><a id="Implementation-1"></a><a class="docs-heading-anchor-permalink" href="#Implementation" title="Permalink"></a></h1><p>Throughout this document reference will be made to a specific XML file as an illustrative example. This is reconstructed from an earlier example in Python2 which is publicly accessible at time of writing. The author will also intersperse graphs from his own exploration in order to make points.</p><h2 id="Streaming-Parser"><a class="docs-heading-anchor" href="#Streaming-Parser">Streaming Parser</a><a id="Streaming-Parser-1"></a><a class="docs-heading-anchor-permalink" href="#Streaming-Parser" title="Permalink"></a></h2><p>As mentioned earlier in this documentation the best XML parser to handle big data is a streaming API that doesn&#39;t load all the data into memory. There are currently two available in Julia in the EzXML.jl module with Streaming API and the XML.jl module with LazyNode. The XML.jl module is preferred because it allows the user to access the nesting structure rather than just the contents of the current node.</p><h2 id="Implementation-Details"><a class="docs-heading-anchor" href="#Implementation-Details">Implementation Details</a><a id="Implementation-Details-1"></a><a class="docs-heading-anchor-permalink" href="#Implementation-Details" title="Permalink"></a></h2><p>There are two exportable functions depending on if the user wants to handle the inherently unstructured metadata. If the metadata is to be appended as attributes to the nesting element it is done in the following way using the example XML file as a guide.</p><pre><code class="nohighlight hljs">    &lt;Record type=&quot;HKQuantityTypeIdentifierHeight&quot;
            sourceName=&quot;Health&quot;
            sourceVersion=&quot;9.2&quot;
            unit=&quot;cm&quot;
            creationDate=&quot;2016-01-02 09:45:10 +0100&quot;
            startDate=&quot;2016-01-02 09:44:00 +0100&quot;
            endDate=&quot;2016-01-02 09:44:00 +0100&quot;
            value=&quot;194&quot;&gt;
     &lt;MetadataEntry key=&quot;HKWasUserEntered&quot; value=&quot;1&quot;/&gt;
    &lt;/Record&gt;</code></pre><p>becomes</p><pre><code class="nohighlight hljs">    &lt;Record type=&quot;HKQuantityTypeIdentifierHeight&quot;
            sourceName=&quot;Health&quot;
            sourceVersion=&quot;9.2&quot;
            unit=&quot;cm&quot;
            creationDate=&quot;2016-01-02 09:45:10 +0100&quot;
            startDate=&quot;2016-01-02 09:44:00 +0100&quot;
            endDate=&quot;2016-01-02 09:44:00 +0100&quot;
            value=&quot;194&quot;
            MetadataEntry1key=&quot;HKWasUserEntered&quot;
            MetadataEntry1value=&quot;1&quot;
    &lt;/Record&gt;</code></pre><p>If the data is fixed width then the output format is a .csv file. If the metadata is included the data contained in the dictionaries is no longer fixed width and a simple export to .csv file is no longer feasible. While the example metadata above in the sample file is simple real life data frequently is not. </p><h2 id="Recommended-Approach-After-Vector-of-Dictionaries-Is-Exported"><a class="docs-heading-anchor" href="#Recommended-Approach-After-Vector-of-Dictionaries-Is-Exported">Recommended Approach After Vector of Dictionaries Is Exported</a><a id="Recommended-Approach-After-Vector-of-Dictionaries-Is-Exported-1"></a><a class="docs-heading-anchor-permalink" href="#Recommended-Approach-After-Vector-of-Dictionaries-Is-Exported" title="Permalink"></a></h2><p>After splitting the data into &quot;Record&quot;, &quot;ActivitySummary&quot; and &quot;Workout&quot; vectors it makes the most sense to split the &quot;Record&quot; and &quot;Workout&quot; vectors by the attribute &quot;sourceName&quot;. This is because the data is structured differently and it is convenient to handle different types separately.</p><p>The metadata from Apple Watch under the &quot;Record&quot; element is frequently the instantaneous heart rate as a constant data stream for all hours of the day while the device is worn. This type of data is unstructured and inherently long. The export file could therefore be a long DataFrame or simply a vector of observations that ignores the Record element it is nested in because the date time is already universal.</p><p>On the other hand data from Withings relate to various body measurements with a fixed amount of observations each time a weighing scale is used. This data is inherently wide and makes more sense with a wide DataFrame. </p><p><img src="../assets/img/download-1.png" alt="subet1"/></p><p><img src="../assets/img/download.png" alt="subet1"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../approach/">« Method</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Saturday 19 October 2024 01:21">Saturday 19 October 2024</span>. Using Julia version 1.11.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
